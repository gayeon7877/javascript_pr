<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>10_JSON_이해하기</title>
</head>
<body>
    <h1>JavaScript Object Notation - 자바스크립트 객체 표기법</h1>
    <h2>JSON은 단순문자열이다.</h2>

    <script>
        const num_1 = 100;
        const num_2 = 200;
        const num_3 = 300;

        const numGroup = [100, 200, 300];
        const newGroup = [num_1, num_2, num_3];

        //-------------------------------------

        const person_1 = {'name':'홍길동', 'age':18};
        const person_2 = {'name':'이순신', 'age':45};
        const person_3 = {'name':'아이유', 'age':29};

        console.log(`person_1의 타입은 ${typeof person_1}`);//object
        console.log(`person_2의 타입은 ${typeof person_2}`);//object
        console.log(`person_3의 타입은 ${typeof person_3}`);//object

        //JSON 방식으로 데이터 저장
        const jsonData = {
            'member' : [
                {'name':'홍길동', 'age':18},
                {'name':'이순신', 'age':45},
                {'name':'아이유', 'age':29}
            ]
        };

        

        console.log(`jsonData의 타입은 ${typeof jsonData}`);//object

        /* 
            클라이언트가 서버로 객체를 전송하려면 
            문자열형식으로 만들어야 하는데 이것을 직렬화라고 한다.

            Serializing(직렬화) -> JSON.stringify()를 이용해서
            자바스크립트의 객체나 배열을 JSON 형식의 문자열로 변환할 수 있다.
        */

        const strJsonData = JSON.stringify(jsonData);
        console.log(`strJsonData의 타입은 ${typeof strJsonData}`);//string
        console.log(`strJsonData = ${strJsonData}`);

        console.log(strJsonData.member[2].name);//문자열이기 때문에 불가능 - 에러발생 10_JSON_이해하기.html:54 Uncaught TypeError: Cannot read properties of undefined (reading '2')

        console.log('-----------------------');

        /*
            서버로부터 클라이언트에 전송된 JSON 데이터를 사용하려면
            객체형식으로 만들어야 하는데 이것을 역직렬화라고 한다.

            Deserializing(역직렬화) -> JSON.parse()를 이용해서
            JSON 형식의 문자열을 객체로 변환할 수 있다.
        */
       const objData = JSON.parse(strJsonData);
       console.log(`objData의 타입은 ${typeof objData}`);//object
       console.log('objData = %j', objData);

       console.log(objData.member[2].name);//아이유
    </script>
</body>
</html>